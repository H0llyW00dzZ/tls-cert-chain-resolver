{{/*
	promptArgs helper template for generating MCP prompt argument definitions.

	This template encapsulates the logic for creating MCP-compliant prompt argument
	specifications with proper validation rules and descriptions. It handles all
	supported MCP argument types with required/optional constraints.

	The template processes argument configuration data and generates appropriate
	MCP argument builder calls with descriptions and requirement flags.

	Template Parameters:
	- .Name: Argument name identifier
	- .Description: Human-readable argument description
	- .Required: Boolean indicating if argument is mandatory

	The generated code includes proper MCP builder method calls with all
	applicable validation and type-specific configuration.
*/}}
{{define "promptArgs"}}
{{- range .}}
				mcp.WithArgument(
					"{{.Name}}",
					mcp.ArgumentDescription("{{.Description}}"),
{{- if .Required}}
					mcp.RequiredArgument(),
{{- end}}
				),
{{- end}}
{{end}}

// createPrompts creates and returns all MCP prompt definitions with their handlers.
// It organizes prompts into two categories: those that don't require embedded filesystem
// access and those that need access to embedded templates for dynamic content generation.
//
// This function generates MCP-compliant prompt definitions with proper argument validation,
// metadata for categorization, and handler bindings. Prompts are categorized based on their
// embedded filesystem requirements to enable flexible server initialization.
//
// Returns:
//   - []ServerPrompt: Slice of server prompt definitions without embed access
//   - []ServerPromptWithEmbed: Slice of server prompt definitions with embed access
//
// The function defines the following prompts:
{{- range .Prompts}}
//   - {{.Name}}: {{.Description}}
{{- end}}
//
// Each prompt definition includes:
//   - MCP argument specifications with validation and descriptions
//   - Comprehensive descriptions for user interface display
//   - Metadata tags for categorization and discovery
//   - Proper handler function bindings for prompt execution
func createPrompts() ([]ServerPrompt, []ServerPromptWithEmbed) {
	// Prompts that don't need embed access
	prompts := []ServerPrompt{
{{- range .Prompts}}
{{- if not .WithEmbed}}
		{
			Prompt: func() mcp.Prompt {
				prompt := mcp.NewPrompt(
					"{{.Name}}",
					mcp.WithPromptDescription("{{.Description}}"),
{{- template "promptArgs" .Arguments}}
				)
{{- if .Meta}}
				prompt.Meta = mcp.NewMetaFromMap({{.Meta | toGoMap}})
{{- end}}
				return prompt
			}(),
			Handler: {{.Handler}},
		},
{{- end}}
{{- end}}
	}

	// Prompts that need embed access
	promptsWithEmbed := []ServerPromptWithEmbed{
{{- range .Prompts}}
{{- if .WithEmbed}}
		{
			Prompt: func() mcp.Prompt {
				prompt := mcp.NewPrompt(
					"{{.Name}}",
					mcp.WithPromptDescription("{{.Description}}"),
{{- template "promptArgs" .Arguments}}
				)
{{- if .Meta}}
				prompt.Meta = mcp.NewMetaFromMap({{.Meta | toGoMap}})
{{- end}}
				return prompt
			}(),
			Handler: {{.Handler}},
		},
{{- end}}
{{- end}}
	}

	return prompts, promptsWithEmbed
}
